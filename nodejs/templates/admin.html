<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style_admin.css"> <!-- Link to your CSS file -->
    <title>Admin Dashboard</title>
</head>
<body>
    <!-- Admin Header -->
    <div class="admin-header">
        <h1>Admin Dashboard</h1>
    </div>

    <!-- Reports Box (Top) -->
    <div class="reports-box">
        <a href="/admin/reports">Reports</a>
    </div>

    <!-- Logout Button (Top Left) -->
    <div class="logout-button">
        <a href='/logout'>Logout</a>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Left Panel (Unresolved and Resolved Requests) -->
        <div class="left-panel">
            <!-- Unresolved Requests Section -->
            <div class="scroll-box unresolved-requests-section">
                <h2>Unresolved Requests</h2>
                <ul id="unresolved-requests-list">
                    <!-- Your unresolved requests list goes here -->
                </ul>
            </div>

            <!-- Resolved Requests Section -->
            <div class="scroll-box resolved-requests-section">
                <h2>Resolved Requests</h2>
                <ul id="resolved-requests-list">
                    <!-- Your resolved requests list goes here -->
                </ul>
            </div>
        </div>

        <!-- Right Panel (Search and Insights) -->
        <div class="right-panel">
            <!-- Search Section -->
            <div class="search-section">
                <h2>Search</h2>
                <form action="/search" method="get">
                    <input type="text" name="query" placeholder="Search...">
                    <!-- Checkboxes for filters -->
                    <div>
                        <input type="checkbox" name="filters" value="artist"> Artist
                        <input type="checkbox" name="filters" value="album"> Album
                        <input type="checkbox" name="filters" value="playlist"> Playlist
                        <input type="checkbox" name="filters" value="listener"> Listener
                        <input type="checkbox" name="filters" value="song"> Song
                    </div>
                    <input type="submit" value="Search">
                </form>
            </div>

            <!-- Insights Section -->
            <div class="insights-section">
                <h2>Insights</h2>
                <div class="insight-boxes">
                    <div class="insight-box">
                        <h3>Total Listeners</h3>
                        <div class="insight-details">
                            <p id="totalListenersCount">0 <a href="/admin/insights/Listener" class="view-button">View</a></p>
                        </div>
                    </div>
                    <div class="insight-box">
                        <h3>Total Songs</h3>
                        <div class="insight-details">
                            <p id="totalSongsCount">0 <a href="/admin/insights/Song" class="view-button">View</a></p>
                        </div>
                    </div>
                    <div class="insight-box">
                        <h3>Total Artists</h3>
                        <div class="insight-details">
                            <p id="totalArtistsCount">0 <a href="/admin/insights/Artist" class="view-button">View</a></p>
                        </div>
                    </div>
                    <div class="insight-box">
                        <h3>Total Playlists</h3>
                        <div class="insight-details">
                            <p id="totalPlaylistsCount">0 <a href="/admin/insights/Playlist" class="view-button">View</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</body>
</html>
<script>
document.addEventListener('DOMContentLoaded', async function () {
    try {
        const response = await fetch('/ajax');
        const data = await response.json();

        const numberOfLis= data.NumUsers[0]['COUNT(*)'];
        const totalListenersCount = document.getElementById('totalListenersCount');
        totalListenersCount.innerHTML = numberOfLis +' <a href="/admin/insights/Listener" class="view-button">View</a>';

    } catch (error) {
        console.error('Error:', error);
    }
});
document.addEventListener('DOMContentLoaded', async function () {
    try {
        const response = await fetch('/ajax');
        const data = await response.json();

        const numberOfSong= data.NumSongs[0]['COUNT(*)'];
        const totalListenersCount = document.getElementById('totalSongsCount');
        totalListenersCount.innerHTML = numberOfSong +' <a href="/admin/insights/Song" class="view-button">View</a>';

    } catch (error) {
        console.error('Error:', error);
    }
});
document.addEventListener('DOMContentLoaded', async function () {
    try {
        const response = await fetch('/ajax');
        const data = await response.json();

        const numberOfPlay= data.NumPlaylist[0]['COUNT(*)'];
        const totalListenersCount = document.getElementById('totalPlaylistsCount');
        totalListenersCount.innerHTML = numberOfPlay +' <a href="/admin/insights/Playlist" class="view-button">View</a>';

    } catch (error) {
        console.error('Error:', error);
    }
});
document.addEventListener('DOMContentLoaded', async function () {
    try {
        const response = await fetch('/ajax');
        const data = await response.json();

        const numberOfArtists = data.NumArtist[0]['COUNT(*)'];
        const totalListenersCount = document.getElementById('totalArtistsCount');
        totalListenersCount.innerHTML = numberOfArtists +' <a href="/admin/insights/Artist" class="view-button">View</a>';

    } catch (error) {
        console.error('Error:', error);
    }
});

        const artistsList = document.getElementById('artists-list');
document.addEventListener('DOMContentLoaded', async function () {
    try {
        const response = await fetch('/ajax');
        const data = await response.json();
        console.log(data);

        const artistsList = document.getElementById('artists-list');
        if (data.NewArtist && Array.isArray(data.NewArtist)) {
            data.NewArtist.forEach(artist => {
                let artistLink = document.createElement('a');
                artistLink.href = `/artist/admin/${artist.ArtistID}`; // Link to artist's admin page
                artistLink.classList.add('artist-box');

                let name = document.createElement('div');
                name.textContent = artist.ArtistName;
                name.classList.add('artist-name');
                artistLink.appendChild(name);

                let img = document.createElement('img');
                img.classList.add('artist-image');

                if (artist.ProfilePic) {
                    // If the artist has a profile picture, set the src to the Base64 data
                    img.src = `data:image/png;base64,${artist.ProfilePic}`;
                } else {
                    // If the artist doesn't have a profile picture, set a placeholder image
                    img.src = '/npc/picture'; // Replace with the path to your placeholder image
                    img.alt = 'Default Profile Picture';
                }

                artistLink.appendChild(img);

                artistsList.appendChild(artistLink);
            });
        }
    } catch (error) {
        console.error('Error:', error);
    }
});













</script>
